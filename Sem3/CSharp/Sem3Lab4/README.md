Лабораторная работа № 4
=======================

Реализовано:
------------

1. Из backup'а была восстановлена `AdventureWorksLT2019`.

2. В лабораторной работе используются следуюшие таблицы: `SalesLT.Product`, `SalesLT.ProductCategory`, `SalesLT.ProductModel`, `SalesLT.ProductDescription` и `ProductModelProductDescription`.

3. Код хранимых процедур можно посмотреть в `examples/SQLQuery.sql`.

4. Класс `DataAccess/Accessor` предоставляет возможность установки соединения с БД и вызова хранимых процедур для получения таблицы ивставки элементов в неё.

5. Класс `ServiceLayer/FileTransfer` выполняет главную задачу: извлечение информанции из БД и сохраниние её в xml файл, объединяя все классы проектов.

6. `DataAccess` и `ServiceLayer` - отдельные проекты.

7. Все модели, используемые для обмена информации между классами, находятся в отдельном проекте `Models`.

8. `ServiseLayer/IXmlGeneratorService` - интерфейс для классов, создающих xml и xsd файлы. Данный интерфейс реализует класс `ServiceLayer/XmlGenerator`. Примеры генерируемых файлов можно посмотреть в папке `examples`: `report.xml` и `report.xsd`.

9. Данным сервисом является [Lab2](../Sem3Lab2), поэтому здесь папка `FileManager` пуста.

10. `ConfigationManager` - [Lab3](../Sem3Lab3), поэтому здесь папка содержит лишь готовый dll. Классы, которые строятся при помощи `ConfigationManager` имеют вид `XXXSettings` и находятся в файлах `XXX.cs`.

11. Примеры конфигурационных файлов находятся в папке `examples`: `config.json` и `config.xml`.

12. Каждая папка - отдельный проект.

13. Для логирования ошибок была создана отдельная база данных `sem3lab4db` с таблицей `dbo.ReportLog`. Код SQL запроса для создания таблицы можно посмотреть в `examples/SQLQuery.sql`.

14. `ServiceLayer/FileTransfer` при возникновении исключения использует `ApplicationInsights/Reporter`, который в свою очередь использует методы в `DataAccess/Accessor` для доступа к БД.

15. `DataAccess/Accessor` использует хранимые процедуры.

Особенности:
------------

* `Reporter` в случае возникновения исключения с параметром `InnerException` отличным от `null`, сначала записывает в БД внутреннее исключение, а затем внешнее, записывая ID внутреннего исключения в соответствующий столбец.